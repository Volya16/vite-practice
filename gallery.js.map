{"version":3,"file":"gallery.js","sources":["../src/js/UnsplashAPI.js","../src/js/render-function.js","../src/img/javascript.svg","../src/js/gallery.js"],"sourcesContent":["import axios from \"axios\";\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com/search/photos';\n    #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n    #query = '';\n    \n    async getPopularPhotos(page) {\n        const url = `${\n          this.#BASE_URL\n            }?query=popular&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n        try { \n            const {data} = await axios(url);\n            return data;\n        } catch (error) {\n            console.log(error);\n        }\n        \n    }\n\n    async getPhotosByQuery(page) { \n       const url = `${\n          this.#BASE_URL\n            }?query=${this.#query}&page=${page}&per_page=12&orientation=portrait&client_id=${this.#API_KEY}`;\n        try { \n            const {data} = await axios(url);\n            return data;\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    set query(newQuery) { \n        this.#query = newQuery;\n    }\n}\n \n","export function renderCardGallery(img) {\n    return img.map(i => `<li><img src=\"${i.urls.small}\" alt=\"${i.alt_description}\"></li>`).join(\"\");\n}","export default \"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='32'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20256'%3e%3cpath%20fill='%23F7DF1E'%20d='M0%200h256v256H0V0Z'%3e%3c/path%3e%3cpath%20d='m67.312%20213.932l19.59-11.856c3.78%206.701%207.218%2012.371%2015.465%2012.371c7.905%200%2012.89-3.092%2012.89-15.12v-81.798h24.057v82.138c0%2024.917-14.606%2036.259-35.916%2036.259c-19.245%200-30.416-9.967-36.087-21.996m85.07-2.576l19.588-11.341c5.157%208.421%2011.859%2014.607%2023.715%2014.607c9.969%200%2016.325-4.984%2016.325-11.858c0-8.248-6.53-11.17-17.528-15.98l-6.013-2.58c-17.357-7.387-28.87-16.667-28.87-36.257c0-18.044%2013.747-31.792%2035.228-31.792c15.294%200%2026.292%205.328%2034.196%2019.247l-18.732%2012.03c-4.125-7.389-8.591-10.31-15.465-10.31c-7.046%200-11.514%204.468-11.514%2010.31c0%207.217%204.468%2010.14%2014.778%2014.608l6.014%202.577c20.45%208.765%2031.963%2017.7%2031.963%2037.804c0%2021.654-17.012%2033.51-39.867%2033.51c-22.339%200-36.774-10.654-43.819-24.574'%3e%3c/path%3e%3c/svg%3e\"","import iziToast from 'izitoast';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { renderCardGallery } from './render-function';\nimport Pagination from 'tui-pagination';\nimport 'tui-pagination/dist/tui-pagination.min.css';\nimport icon from '../img/javascript.svg';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst galleryListEl = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst loader = document.querySelector('.loader');\n\nconst api = new UnsplashAPI();\n\nconst container = document.getElementById('tui-pagination-container');\nconst options = {\n  // below default value of options\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\n\nconst pagination = new Pagination(container, options);\n\nconst page = pagination.getCurrentPage();\n\napi.getPopularPhotos(page).then(data => {\n  galleryListEl.innerHTML = renderCardGallery(data.results);\n  pagination.reset(data.total);\n});\n\nfunction paginationPopular(event) {\n  const currentPage = event.page;\n  api.getPopularPhotos(currentPage).then(data => {\n    galleryListEl.innerHTML = renderCardGallery(data.results);\n  });\n}\npagination.on('afterMove', paginationPopular);\n\nfunction paginationByQuery(event) {\n  const currentPage = event.page;\n  api.getPhotosByQuery(currentPage).then(data => {\n    galleryListEl.innerHTML = renderCardGallery(data.results);\n  });\n}\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  const searchQuery = event.target.elements.query.value.trim();\n  if (searchQuery === '') {\n    return;\n  }\n  api.query = searchQuery;\n  loader.classList.remove('is-hidden');\n  pagination.off('afterMove', paginationPopular);\n  pagination.off('afterMove', paginationByQuery);\n  try {\n    const data = await api.getPhotosByQuery(page);\n    if (data.results.length === 0) {\n      iziToast.info({\n        message: 'Try another query',\n        iconUrl: icon,\n      });\n      container.classList.add('is-hidden');\n      return;\n    }\n    galleryListEl.innerHTML = renderCardGallery(data.results);\n    if (data.total <= 12) {\n      container.classList.add('is-hidden');\n    } else {\n      container.classList.remove('is-hidden');\n    }\n    pagination.reset(data.total);\n    pagination.on('afterMove', paginationByQuery);\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.classList.add('is-hidden');\n  }\n});\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","error","newQuery","__privateSet","renderCardGallery","img","i","icon","galleryListEl","form","loader","api","container","options","pagination","Pagination","paginationPopular","event","currentPage","paginationByQuery","searchQuery","iziToast"],"mappings":"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"}